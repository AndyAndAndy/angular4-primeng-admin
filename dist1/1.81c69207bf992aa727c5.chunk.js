webpackJsonp([1],{"5v8a":function(e,t,n){"use strict";var l=n("bKpL"),i=n("lx+J");l.Observable.prototype.map=i.map},HbEj:function(e,t,n){"use strict";function l(e){if(0===e)return"0 Byte";var t=["Bytes","KB","MB","GB","TB","PB"],n=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,n)).toFixed(2))+" "+t[n]}function i(e){if(0===e)return"0 Byte";var t=["Bytes","KB","MB","GB","TB","PB"],n=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,n)).toFixed(2))+" "+t[n]}function o(e){return p["\u0275vid"](0,[(e()(),p["\u0275eld"](0,null,null,0,"i",[["aria-hidden","true"],["class","fa fa-check-circle success-i"]],null,null,null,null,null))],null,null)}function r(e){return p["\u0275vid"](0,[(e()(),p["\u0275eld"](0,null,null,15,"div",[["class","upload-file"]],null,null,null,null,null)),(e()(),p["\u0275ted"](null,["\n        "])),(e()(),p["\u0275eld"](0,null,null,1,"p",[["class","file-name"]],null,null,null,null,null)),(e()(),p["\u0275ted"](null,["",""])),(e()(),p["\u0275ted"](null,["\n        "])),(e()(),p["\u0275eld"](0,null,null,4,"div",[["class","progress-bar-container"]],null,null,null,null,null)),(e()(),p["\u0275ted"](null,["\n          "])),(e()(),p["\u0275eld"](0,null,null,1,"div",[["class","bar"]],[[4,"width",null],[4,"background-color",null]],null,null,null,null)),(e()(),p["\u0275ted"](null,["\n          "])),(e()(),p["\u0275ted"](null,["\n        "])),(e()(),p["\u0275ted"](null,["\n        "])),(e()(),p["\u0275eld"](0,null,null,0,"span",[["class","fa fa-trash delete-file"]],null,[[null,"click"]],function(e,t,n){var l=!0,i=e.component;if("click"===t){l=!1!==i.removeFile(e.context.$implicit.id)&&l}return l},null,null)),(e()(),p["\u0275ted"](null,["\n        "])),(e()(),p["\u0275and"](16777216,null,null,1,null,o)),p["\u0275did"](16384,null,0,m.NgIf,[p.ViewContainerRef,p.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),p["\u0275ted"](null,["\n      "]))],function(e,t){e(t,14,0,200==(null==t.context.$implicit?null:t.context.$implicit.responseStatus))},function(e,t){e(t,3,0,t.context.$implicit.name),e(t,7,0,t.context.$implicit.progress.data.percentage+"%",201==(null==t.context.$implicit?null:t.context.$implicit.responseStatus)?"#13ce66":"#ff4949")})}function u(e){return p["\u0275vid"](0,[(e()(),p["\u0275eld"](0,null,null,2,"button",[["class","btn-info FR"],["label","\u4e0a\u4f20\u6240\u6709"],["pButton",""],["type","button"]],null,[[null,"click"]],function(e,t,n){var l=!0,i=e.component;if("click"===t){l=!1!==i.startUpload()&&l}return l},null,null)),p["\u0275prd"](512,null,g.DomHandler,g.DomHandler,[]),p["\u0275did"](4341760,null,0,v.Button,[p.ElementRef,g.DomHandler],{label:[0,"label"]},null)],function(e,t){e(t,2,0,"\u4e0a\u4f20\u6240\u6709")},null)}function a(e){return p["\u0275vid"](0,[(e()(),p["\u0275eld"](0,null,null,1,"my-breadcrumb",[["name1","\u4e0a\u4f20"],["name2","\u4e0a\u4f20"]],null,null,null,h.b,h.a)),p["\u0275did"](49152,null,0,b.a,[m.Location],{name1:[0,"name1"],name2:[1,"name2"]},null),(e()(),p["\u0275ted"](null,["\n"])),(e()(),p["\u0275eld"](0,null,null,2,"p-growl",[],null,[[null,"valueChange"]],function(e,t,n){var l=!0,i=e.component;if("valueChange"===t){l=!1!==(i.msgs=n)&&l}return l},F.b,F.a)),p["\u0275prd"](512,null,g.DomHandler,g.DomHandler,[]),p["\u0275did"](4636672,null,0,H.Growl,[p.ElementRef,g.DomHandler,p.IterableDiffers,[2,P.MessageService]],{value:[0,"value"]},{valueChange:"valueChange"}),(e()(),p["\u0275ted"](null,["\n"])),(e()(),p["\u0275eld"](0,null,null,2,"button",[["class","btn-info FR"],["label","\u4e0a\u4f20\u6240\u6709"],["pButton",""],["type","button"]],null,[[null,"click"]],function(e,t,n){var l=!0,i=e.component;if("click"===t){l=!1!==i.uploadShow()&&l}return l},null,null)),p["\u0275prd"](512,null,g.DomHandler,g.DomHandler,[]),p["\u0275did"](4341760,null,0,v.Button,[p.ElementRef,g.DomHandler],{label:[0,"label"]},null),(e()(),p["\u0275ted"](null,["\n"])),(e()(),p["\u0275eld"](0,null,null,0,"br",[],null,null,null,null,null)),(e()(),p["\u0275ted"](null,["\n\n"])),(e()(),p["\u0275eld"](0,null,null,35,"p-dialog",[["header","\u4e0a\u4f20"],["positionTop","150"],["width","600"]],null,[[null,"visibleChange"],[null,"onHide"]],function(e,t,n){var l=!0,i=e.component;if("visibleChange"===t){l=!1!==(i.dialog=n)&&l}if("onHide"===t){l=!1!==i.dialogHide(n)&&l}return l},k.b,k.a)),p["\u0275prd"](512,null,g.DomHandler,g.DomHandler,[]),p["\u0275did"](12763136,null,2,L.Dialog,[p.ElementRef,g.DomHandler,p.Renderer2],{header:[0,"header"],width:[1,"width"],positionTop:[2,"positionTop"],contentStyle:[3,"contentStyle"],modal:[4,"modal"],responsive:[5,"responsive"],visible:[6,"visible"]},{onHide:"onHide",visibleChange:"visibleChange"}),p["\u0275qud"](335544320,1,{headerFacet:0}),p["\u0275qud"](335544320,2,{footerFacet:0}),p["\u0275pod"]({overflow:0}),(e()(),p["\u0275ted"](1,["\n  "])),(e()(),p["\u0275eld"](0,null,1,27,"div",[],[[8,"hidden",0]],null,null,null,null)),(e()(),p["\u0275ted"](null,["\n    "])),(e()(),p["\u0275eld"](0,null,null,24,"div",[["class","dialog-content"]],null,null,null,null,null)),(e()(),p["\u0275ted"](null,["\n      "])),(e()(),p["\u0275eld"](0,null,null,4,"label",[["class","upload-button"]],null,null,null,null,null)),(e()(),p["\u0275ted"](null,["\n        "])),(e()(),p["\u0275eld"](0,null,null,1,"input",[["accept","image/gif, image/jpeg,image/png"],["multiple",""],["ngFileSelect",""],["type","file"]],null,[[null,"uploadOutput"]],function(e,t,n){var l=!0,i=e.component;if("uploadOutput"===t){l=!1!==i.onUploadOutput(n)&&l}return l},null,null)),p["\u0275did"](212992,null,0,j,[p.ElementRef],{uploadInput:[0,"uploadInput"]},{uploadOutput:"uploadOutput"}),(e()(),p["\u0275ted"](null,["\n        \u9009\u62e9\u56fe\u7247\n      "])),(e()(),p["\u0275ted"](null,["\n\n      "])),(e()(),p["\u0275and"](16777216,null,null,1,null,r)),p["\u0275did"](802816,null,0,m.NgForOf,[p.ViewContainerRef,p.TemplateRef,p.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),p["\u0275ted"](null,["\n\n\n      "])),(e()(),p["\u0275eld"](0,null,null,12,"p-footer",[],null,null,null,S.p,S.g)),p["\u0275did"](49152,[[2,4]],0,N.Footer,[],null,null),(e()(),p["\u0275ted"](0,["\n        "])),(e()(),p["\u0275eld"](0,null,0,8,"div",[["class","dialog-footer"],["style","padding: 20px 0 28px 0"]],null,null,null,null,null)),(e()(),p["\u0275ted"](null,["\n          "])),(e()(),p["\u0275and"](16777216,null,null,1,null,u)),p["\u0275did"](16384,null,0,m.NgIf,[p.ViewContainerRef,p.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),p["\u0275ted"](null,["\n          "])),(e()(),p["\u0275eld"](0,null,null,2,"button",[["class","ui-button-secondary FR"],["label","\u53d6\u6d88"],["pButton",""],["type","button"]],null,[[null,"click"]],function(e,t,n){var l=!0,i=e.component;if("click"===t){l=!1!=(i.dialog=!1)&&l}return l},null,null)),p["\u0275prd"](512,null,g.DomHandler,g.DomHandler,[]),p["\u0275did"](4341760,null,0,v.Button,[p.ElementRef,g.DomHandler],{label:[0,"label"]},null),(e()(),p["\u0275ted"](null,["\n        "])),(e()(),p["\u0275ted"](0,["\n      "])),(e()(),p["\u0275ted"](null,["\n    "])),(e()(),p["\u0275ted"](null,["\n  "])),(e()(),p["\u0275ted"](1,["\n\n"])),(e()(),p["\u0275ted"](null,["\n\n\n\u5c55\u793a \u548c primeng \u4e0d\u4e00\u6837\u7684\u4e0a\u4f20 (\u5e26\u8bf7\u6c42\u5934);\u6837\u5f0f\u5927\u5bb6\u81ea\u5df1\u53ef\u4ee5\u7ec4\u88c5\u4e00\u4e0b;\u4ed6\u7684\u5b98\u7f51\u6837\u5f0f\u4e5f\u4e0d\u662f\u5f88\u597d\n\n\ngithub  \u5730\u5740  ngx-uploader  "])),(e()(),p["\u0275eld"](0,null,null,1,"a",[["href","https://github.com/jkuri/ngx-uploader"],["style","font-size: 20px"]],null,null,null,null,null)),(e()(),p["\u0275ted"](null,["ngx-uploader"])),(e()(),p["\u0275ted"](null,["\n"]))],function(e,t){var n=t.component;e(t,1,0,"\u4e0a\u4f20","\u4e0a\u4f20"),e(t,5,0,n.msgs);e(t,9,0,"\u4e0a\u4f20\u6240\u6709");e(t,15,0,"\u4e0a\u4f20","600","150",e(t,18,0,"visible"),!0,!0,n.dialog),e(t,27,0,n.uploadInput),e(t,31,0,n.files),e(t,39,0,n.files.length);e(t,43,0,"\u53d6\u6d88")},function(e,t){e(t,20,0,!t.component.uploadNgIf)})}function s(e){return p["\u0275vid"](0,[(e()(),p["\u0275eld"](0,null,null,1,"app-upload",[],null,null,null,a,z)),p["\u0275did"](114688,null,0,R,[],null,null)],function(e,t){e(t,1,0)},null)}Object.defineProperty(t,"__esModule",{value:!0});var d,p=n("/oeL"),c=function(){function e(){}return e}(),f=[".upload-button[_ngcontent-%COMP%]{display:inline-block;line-height:1;white-space:nowrap;cursor:pointer;border-color:#c4c4c4;-webkit-appearance:none;text-align:center;box-sizing:border-box;outline:none;margin:0;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;padding:10px 15px;font-size:14px;border-radius:4px;color:#fff;background-color:#20a0ff;border-color:#20a0ff}.upload-button[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}.upload-file[_ngcontent-%COMP%]{margin:10px;cursor:pointer;position:relative}.upload-file[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding:8px 5px}.upload-file[_ngcontent-%COMP%]:hover{background-color:#eef1f6}.upload-file[_ngcontent-%COMP%]:hover   .delete-file[_ngcontent-%COMP%]{display:block}.progress-bar-container[_ngcontent-%COMP%]{width:100%;height:6px;border-radius:6px;background:#e4e8f1;margin:2px 0;position:relative;color:#364347;font-size:14px;line-height:6px}.progress-bar-container[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{z-index:2}.progress-bar-container[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{z-index:1;padding:0;margin:0;border-radius:6px;position:absolute;top:0;left:0;height:6px;background:#ff4949}.progress-bar-container[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]   .green[_ngcontent-%COMP%]{background-color:#13ce66!important;color:#fff!important}.delete-file[_ngcontent-%COMP%]{position:absolute;right:26px;top:11px;font-size:14px;cursor:pointer;color:#ff4949;display:none}.success-i[_ngcontent-%COMP%]{color:#13ce66}.error-i[_ngcontent-%COMP%], .success-i[_ngcontent-%COMP%]{position:absolute;right:5px;top:11px;font-size:14px;cursor:pointer}.error-i[_ngcontent-%COMP%]{color:#ff4949}"],m=n("qbdv"),g=n("4cOY"),v=n("01UM"),h=n("KRnK"),b=n("DIaT"),y=n("bKpL");n("/zHi"),n("XL2q"),n("RpuY"),n("5v8a");!function(e){e[e.Queue=0]="Queue",e[e.Uploading=1]="Uploading",e[e.Done=2]="Done",e[e.Canceled=3]="Canceled"}(d||(d={}));var O,M=function(){function e(){this.files=[],this.serviceEvents=new p.EventEmitter}return e.prototype.handleFiles=function(e){var t=this;(n=this.files).push.apply(n,[].map.call(e,function(e,n){var i={fileIndex:n,id:t.generateId(),name:e.name,size:e.size,type:e.type,form:new FormData,progress:{status:d.Queue,data:{percentage:0,speed:0,speedHuman:l(0)+"/s",startTime:null,endTime:null,eta:null,etaHuman:null}},lastModifiedDate:e.lastModifiedDate,sub:void 0,nativeFile:e};return n+=1,t.serviceEvents.emit({type:"addedToQueue",file:i}),i})),this.serviceEvents.emit({type:"allAddedToQueue"});var n},e.prototype.initInputEvents=function(e){var t=this;e.subscribe(function(e){switch(e.type){case"uploadFile":var n=t.files.findIndex(function(t){return t===e.file});-1!==n&&e.file&&(t.files[n].sub=t.uploadFile(e.file,e).subscribe(function(e){t.serviceEvents.emit(e)}));break;case"uploadAll":var l=void 0!==e.concurrency&&e.concurrency>0?e.concurrency:Number.POSITIVE_INFINITY,i=t.files.filter(function(e){return e.progress.status===d.Queue});if(!i.length)return;y.Observable.of.apply(y.Observable,i).mergeMap(function(n){return t.uploadFile(n,e)},l).subscribe(function(e){t.serviceEvents.emit(e)});break;case"cancel":var o=e.id||null;if(!o)return;var r=t.files.findIndex(function(e){return e.id===o});-1!==r&&(t.files[r].sub&&t.files[r].sub.unsubscribe(),t.serviceEvents.emit({type:"cancelled",file:t.files[r]}),t.files[r].progress.status=d.Canceled);break;case"cancelAll":t.files.forEach(function(e){e.sub&&e.sub.unsubscribe(),e.progress.status=d.Canceled,t.serviceEvents.emit({type:"cancelled",file:e})});break;case"remove":if(!e.id)return;var u=t.files.findIndex(function(t){return t.id===e.id});if(-1!==u){var a=t.files[u];t.files.splice(u,1),t.serviceEvents.emit({type:"removed",file:a})}break;case"removeAll":t.files.length&&(t.files=[],t.serviceEvents.emit({type:"removedAll"}))}})},e.prototype.uploadFile=function(e,t){var n=this;return new y.Observable(function(i){var o=t.url||"",r=t.method||"POST",u=t.data||{},a=t.headers||{},s=new FileReader,p=new XMLHttpRequest,c=(new Date).getTime(),f=e.progress.data&&e.progress.data.startTime||c,m=0,g=null;p.upload.addEventListener("progress",function(t){if(t.lengthComputable){var o=Math.round(100*t.loaded/t.total),r=(new Date).getTime()-c;m=Math.round(t.loaded/r*1e3),f=e.progress.data&&e.progress.data.startTime||(new Date).getTime(),g=Math.ceil((t.total-t.loaded)/m),e.progress={status:d.Uploading,data:{percentage:o,speed:m,speedHuman:l(m)+"/s",startTime:f,endTime:null,eta:g,etaHuman:n.secondsToHuman(g)}},i.next({type:"uploading",file:e})}},!1),p.upload.addEventListener("error",function(e){i.error(e),i.complete()}),p.onreadystatechange=function(){if(p.readyState===XMLHttpRequest.DONE){var t=Math.round(e.size/((new Date).getTime()-f)*1e3);e.progress={status:d.Done,data:{percentage:100,speed:t,speedHuman:l(t)+"/s",startTime:f,endTime:(new Date).getTime(),eta:g,etaHuman:n.secondsToHuman(g||0)}},e.responseStatus=p.status;try{e.response=JSON.parse(p.response)}catch(t){e.response=p.response}i.next({type:"done",file:e}),i.complete()}},p.open(r,o,!0),p.withCredentials=!!t.withCredentials;try{var v=e.nativeFile,h=n.files.findIndex(function(e){return e.nativeFile===v});n.files[h].progress.status===d.Canceled&&i.complete(),e.form.append(t.fieldName||"file",v,v.name),Object.keys(u).forEach(function(t){return e.form.append(t,u[t])}),Object.keys(a).forEach(function(e){return p.setRequestHeader(e,a[e])}),n.serviceEvents.emit({type:"start",file:e}),p.send(e.form)}catch(e){i.complete()}return function(){p.abort(),s.abort()}})},e.prototype.secondsToHuman=function(e){return new Date(1e3*e).toISOString().substr(11,8)},e.prototype.generateId=function(){return Math.random().toString(36).substring(7)},e}(),E=this&&this.__decorate||function(e,t,n,l){var i,o=arguments.length,r=o<3?t:null===l?l=Object.getOwnPropertyDescriptor(t,n):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,l);else for(var u=e.length-1;u>=0;u--)(i=e[u])&&(r=(o<3?i(r):o>3?i(t,n,r):i(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r},I=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},w=function(){function e(e){this.elementRef=e,this.stopEvent=function(e){e.stopPropagation(),e.preventDefault()},this.upload=new M,this.uploadOutput=new p.EventEmitter}return e.prototype.ngOnInit=function(){var e=this;this.el=this.elementRef.nativeElement,this.upload.serviceEvents.subscribe(function(t){e.uploadOutput.emit(t)}),this.uploadInput instanceof p.EventEmitter&&this.upload.initInputEvents(this.uploadInput),this.el.addEventListener("drop",this.stopEvent,!1),this.el.addEventListener("dragenter",this.stopEvent,!1),this.el.addEventListener("dragover",this.stopEvent,!1)},e.prototype.ngOnDestroy=function(){this.uploadInput&&this.uploadInput.unsubscribe()},e.prototype.onDrop=function(e){e.stopPropagation(),e.preventDefault();var t={type:"drop"};this.uploadOutput.emit(t),this.upload.handleFiles(e.dataTransfer.files)},e.prototype.onDragOver=function(e){if(e){var t={type:"dragOver"};this.uploadOutput.emit(t)}},e.prototype.onDragLeave=function(e){if(e){var t={type:"dragOut"};this.uploadOutput.emit(t)}},E([Object(p.Input)(),I("design:type",p.EventEmitter)],e.prototype,"uploadInput",void 0),E([Object(p.Output)(),I("design:type",p.EventEmitter)],e.prototype,"uploadOutput",void 0),E([Object(p.HostListener)("drop",["$event"]),I("design:type",Function),I("design:paramtypes",[Object]),I("design:returntype",void 0)],e.prototype,"onDrop",null),E([Object(p.HostListener)("dragover",["$event"]),I("design:type",Function),I("design:paramtypes",[Event]),I("design:returntype",void 0)],e.prototype,"onDragOver",null),E([Object(p.HostListener)("dragleave",["$event"]),I("design:type",Function),I("design:paramtypes",[Event]),I("design:returntype",void 0)],e.prototype,"onDragLeave",null),e=E([Object(p.Directive)({selector:"[ngFileDrop]"}),I("design:paramtypes",[p.ElementRef])],e)}(),D=this&&this.__decorate||function(e,t,n,l){var i,o=arguments.length,r=o<3?t:null===l?l=Object.getOwnPropertyDescriptor(t,n):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,l);else for(var u=e.length-1;u>=0;u--)(i=e[u])&&(r=(o<3?i(r):o>3?i(t,n,r):i(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r},C=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},T=function(){function e(e){var t=this;this.elementRef=e,this.fileListener=function(){t.el.files&&t.upload.handleFiles(t.el.files)},this.upload=new M,this.uploadOutput=new p.EventEmitter}return e.prototype.ngOnInit=function(){var e=this;this.el=this.elementRef.nativeElement,this.el.addEventListener("change",this.fileListener,!1),this.upload.serviceEvents.subscribe(function(t){e.uploadOutput.emit(t)}),this.uploadInput instanceof p.EventEmitter&&this.upload.initInputEvents(this.uploadInput)},e.prototype.ngOnDestroy=function(){this.el.removeEventListener("change",this.fileListener,!1),this.uploadInput&&this.uploadInput.unsubscribe()},D([Object(p.Input)(),C("design:type",p.EventEmitter)],e.prototype,"uploadInput",void 0),D([Object(p.Output)(),C("design:type",p.EventEmitter)],e.prototype,"uploadOutput",void 0),e=D([Object(p.Directive)({selector:"[ngFileSelect]"}),C("design:paramtypes",[p.ElementRef])],e)}(),x=this&&this.__decorate||function(e,t,n,l){var i,o=arguments.length,r=o<3?t:null===l?l=Object.getOwnPropertyDescriptor(t,n):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,l);else for(var u=e.length-1;u>=0;u--)(i=e[u])&&(r=(o<3?i(r):o>3?i(t,n,r):i(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r},R=(function(){function e(){}e=x([Object(p.NgModule)({declarations:[T,w],exports:[T,w]})],e)}(),function(){function e(){this.msgs=[],this.dialog=!1,this.uploadNgIf=!1,this.spanSuccee=!1,this.spanError=!1,this.uploading=!0,this.fileCount=0,this.fileNumber=0,this.fileArray=[],this.formData={concurrency:0,autoUpload:!1,verbose:!0},this.files=[],this.uploadInput=new p.EventEmitter,this.humanizeBytes=l}return e.prototype.ngOnInit=function(){},e.prototype.uploadShow=function(){var e=this;window.setTimeout(function(){e.dialog=!0},1),this.uploadNgIf=!0,this.fileCount=0},e.prototype.onUploadOutput=function(e){var t=this;if("done"===e.type&&(this.fileCount=this.fileCount+1,201!=e.file.responseStatus?(this.msg(4,"\u4e0a\u4f20\u5931\u8d25,\u670d\u52a1\u5668\u9519\u8bef"),window.setTimeout(function(){t.dialog=!1},200)):(console.log(e.file),this.fileCount===this.fileNumber&&window.setTimeout(function(){t.dialog=!1,t.msg(1,"\u4e0a\u4f20\u6210\u529f")},200))),"allAddedToQueue"===e.type);else if("addedToQueue"===e.type&&void 0!==e.file)this.files.push(e.file),this.fileNumber=this.files.length;else if("uploading"===e.type&&void 0!==e.file){var n=this.files.findIndex(function(t){return void 0!==e.file&&t.id===e.file.id});this.files[n]=e.file}else"removed"===e.type?this.files=this.files.filter(function(t){return t!==e.file}):"dragOver"===e.type?this.dragOver=!0:"dragOut"===e.type?this.dragOver=!1:"drop"===e.type&&(this.dragOver=!1)},e.prototype.startUpload=function(){var e=(sessionStorage.getItem("userToken"),{type:"uploadAll",url:"https://jsonplaceholder.typicode.com/posts/",method:"post",data:{foo:"bar"},concurrency:0});this.uploadInput.emit(e)},e.prototype.removeFile=function(e){this.uploadInput.emit({type:"remove",id:e})},e.prototype.removeFileArray=function(e){this.fileArray.splice(e,1)},e.prototype.errorImg=function(e){e.srcElement.src="./assets/images/shop/img-no.png"},e.prototype.dialogHide=function(e){this.uploadNgIf=!1,this.files=[]},e.prototype.msg=function(e,t){var n=this,l="info";1==e?l="success":2==e?l="info":3==e?l="warn":4==e&&(l="error"),this.msgs.push({severity:l,detail:t}),this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(function(){n.msgs=[]},3e3)},e.ctorParameters=function(){return[]},e}()),F=n("JhYc"),H=n("fZht"),P=n("NYDW"),k=n("4VUa"),L=n("wiMU");!function(e){e[e.Queue=0]="Queue",e[e.Uploading=1]="Uploading",e[e.Done=2]="Done",e[e.Canceled=3]="Canceled"}(O||(O={}));var _=function(){function e(){this.files=[],this.serviceEvents=new p.EventEmitter}return e.prototype.handleFiles=function(e){var t=this;(n=this.files).push.apply(n,[].map.call(e,function(e,n){var l={fileIndex:n,id:t.generateId(),name:e.name,size:e.size,type:e.type,form:new FormData,progress:{status:O.Queue,data:{percentage:0,speed:0,speedHuman:i(0)+"/s",startTime:null,endTime:null,eta:null,etaHuman:null}},lastModifiedDate:e.lastModifiedDate,sub:void 0,nativeFile:e};return n+=1,t.serviceEvents.emit({type:"addedToQueue",file:l}),l})),this.serviceEvents.emit({type:"allAddedToQueue"});var n},e.prototype.initInputEvents=function(e){var t=this;e.subscribe(function(e){switch(e.type){case"uploadFile":var n=t.files.findIndex(function(t){return t===e.file});-1!==n&&e.file&&(t.files[n].sub=t.uploadFile(e.file,e).subscribe(function(e){t.serviceEvents.emit(e)}));break;case"uploadAll":var l=void 0!==e.concurrency&&e.concurrency>0?e.concurrency:Number.POSITIVE_INFINITY,i=t.files.filter(function(e){return e.progress.status===O.Queue});if(!i.length)return;y.Observable.of.apply(y.Observable,i).mergeMap(function(n){return t.uploadFile(n,e)},l).subscribe(function(e){t.serviceEvents.emit(e)});break;case"cancel":var o=e.id||null;if(!o)return;var r=t.files.findIndex(function(e){return e.id===o});-1!==r&&(t.files[r].sub&&t.files[r].sub.unsubscribe(),t.serviceEvents.emit({type:"cancelled",file:t.files[r]}),t.files[r].progress.status=O.Canceled);break;case"cancelAll":t.files.forEach(function(e){e.sub&&e.sub.unsubscribe(),e.progress.status=O.Canceled,t.serviceEvents.emit({type:"cancelled",file:e})});break;case"remove":if(!e.id)return;var u=t.files.findIndex(function(t){return t.id===e.id});if(-1!==u){var a=t.files[u];t.files.splice(u,1),t.serviceEvents.emit({type:"removed",file:a})}break;case"removeAll":t.files.length&&(t.files=[],t.serviceEvents.emit({type:"removedAll"}))}})},e.prototype.uploadFile=function(e,t){var n=this;return new y.Observable(function(l){var o=t.url||"",r=t.method||"POST",u=t.data||{},a=t.headers||{},s=new FileReader,d=new XMLHttpRequest,p=(new Date).getTime(),c=e.progress.data&&e.progress.data.startTime||p,f=0,m=null;d.upload.addEventListener("progress",function(t){if(t.lengthComputable){var o=Math.round(100*t.loaded/t.total),r=(new Date).getTime()-p;f=Math.round(t.loaded/r*1e3),c=e.progress.data&&e.progress.data.startTime||(new Date).getTime(),m=Math.ceil((t.total-t.loaded)/f),e.progress={status:O.Uploading,data:{percentage:o,speed:f,speedHuman:i(f)+"/s",startTime:c,endTime:null,eta:m,etaHuman:n.secondsToHuman(m)}},l.next({type:"uploading",file:e})}},!1),d.upload.addEventListener("error",function(e){l.error(e),l.complete()}),d.onreadystatechange=function(){if(d.readyState===XMLHttpRequest.DONE){var t=Math.round(e.size/((new Date).getTime()-c)*1e3);e.progress={status:O.Done,data:{percentage:100,speed:t,speedHuman:i(t)+"/s",startTime:c,endTime:(new Date).getTime(),eta:m,etaHuman:n.secondsToHuman(m||0)}},e.responseStatus=d.status;try{e.response=JSON.parse(d.response)}catch(t){e.response=d.response}l.next({type:"done",file:e}),l.complete()}},d.open(r,o,!0),d.withCredentials=!!t.withCredentials;try{var g=e.nativeFile,v=n.files.findIndex(function(e){return e.nativeFile===g});n.files[v].progress.status===O.Canceled&&l.complete(),e.form.append(t.fieldName||"file",g,g.name),Object.keys(u).forEach(function(t){return e.form.append(t,u[t])}),Object.keys(a).forEach(function(e){return d.setRequestHeader(e,a[e])}),n.serviceEvents.emit({type:"start",file:e}),d.send(e.form)}catch(e){l.complete()}return function(){d.abort(),s.abort()}})},e.prototype.secondsToHuman=function(e){return new Date(1e3*e).toISOString().substr(11,8)},e.prototype.generateId=function(){return Math.random().toString(36).substring(7)},e}(),j=function(){function e(e){var t=this;this.elementRef=e,this.fileListener=function(){t.el.files&&t.upload.handleFiles(t.el.files)},this.upload=new _,this.uploadOutput=new p.EventEmitter}return e.prototype.ngOnInit=function(){var e=this;this.el=this.elementRef.nativeElement,this.el.addEventListener("change",this.fileListener,!1),this.upload.serviceEvents.subscribe(function(t){e.uploadOutput.emit(t)}),this.uploadInput instanceof p.EventEmitter&&this.upload.initInputEvents(this.uploadInput)},e.prototype.ngOnDestroy=function(){this.el.removeEventListener("change",this.fileListener,!1),this.uploadInput&&this.uploadInput.unsubscribe()},e.ctorParameters=function(){return[{type:p.ElementRef}]},e}(),S=n("HXr0"),N=n("/zAi"),B=[f],z=p["\u0275crt"]({encapsulation:0,styles:B,data:{}}),A=p["\u0275ccf"]("app-upload",R,s,{},{},[]),Q=n("bm2B"),U=n("CPp0"),q=n("Il9Y"),$=n("SSOi"),K=n("Rs3a"),X=n("pQo2"),Y=n("AS1N"),V=n("kmr5"),J=n("wRXj"),G=n("gxwg"),Z=n("cZ+a"),W=n("V0p3"),ee=n("BkNc"),te=function(){function e(){}return e}();n.d(t,"UploadModuleNgFactory",function(){return ne});var ne=p["\u0275cmf"](c,[],function(e){return p["\u0275mod"]([p["\u0275mpd"](512,p.ComponentFactoryResolver,p["\u0275CodegenComponentFactoryResolver"],[[8,[A]],[3,p.ComponentFactoryResolver],p.NgModuleRef]),p["\u0275mpd"](4608,Q["\u0275i"],Q["\u0275i"],[]),p["\u0275mpd"](4608,Q.FormBuilder,Q.FormBuilder,[]),p["\u0275mpd"](4608,U.c,U.c,[]),p["\u0275mpd"](4608,U.k,U.b,[]),p["\u0275mpd"](5120,U.n,U.p,[]),p["\u0275mpd"](4608,U.m,U.m,[U.c,U.k,U.n]),p["\u0275mpd"](4608,U.j,U.a,[]),p["\u0275mpd"](5120,U.e,U.q,[U.m,U.j]),p["\u0275mpd"](4608,U.s,U.s,[]),p["\u0275mpd"](4608,U.g,U.o,[U.s,U.k]),p["\u0275mpd"](5120,U.h,U.r,[U.g,U.j]),p["\u0275mpd"](4608,m.NgLocalization,m.NgLocaleLocalization,[p.LOCALE_ID]),p["\u0275mpd"](512,Q["\u0275ba"],Q["\u0275ba"],[]),p["\u0275mpd"](512,Q.FormsModule,Q.FormsModule,[]),p["\u0275mpd"](512,Q.ReactiveFormsModule,Q.ReactiveFormsModule,[]),p["\u0275mpd"](512,U.f,U.f,[]),p["\u0275mpd"](512,U.i,U.i,[]),p["\u0275mpd"](512,m.CommonModule,m.CommonModule,[]),p["\u0275mpd"](512,v.ButtonModule,v.ButtonModule,[]),p["\u0275mpd"](512,N.SharedModule,N.SharedModule,[]),p["\u0275mpd"](512,q.PanelModule,q.PanelModule,[]),p["\u0275mpd"](512,$.InputTextModule,$.InputTextModule,[]),p["\u0275mpd"](512,K.PaginatorModule,K.PaginatorModule,[]),p["\u0275mpd"](512,X.DataTableModule,X.DataTableModule,[]),p["\u0275mpd"](512,L.DialogModule,L.DialogModule,[]),p["\u0275mpd"](512,Y.CalendarModule,Y.CalendarModule,[]),p["\u0275mpd"](512,H.GrowlModule,H.GrowlModule,[]),p["\u0275mpd"](512,V.MultiSelectModule,V.MultiSelectModule,[]),p["\u0275mpd"](512,J.DropdownModule,J.DropdownModule,[]),p["\u0275mpd"](512,G.CheckboxModule,G.CheckboxModule,[]),p["\u0275mpd"](512,Z.TooltipModule,Z.TooltipModule,[]),p["\u0275mpd"](512,W.OverlayPanelModule,W.OverlayPanelModule,[]),p["\u0275mpd"](512,ee.q,ee.q,[[2,ee.v],[2,ee.m]]),p["\u0275mpd"](512,b.b,b.b,[]),p["\u0275mpd"](512,te,te,[]),p["\u0275mpd"](512,c,c,[]),p["\u0275mpd"](1024,ee.k,function(){return[[{path:"",component:R}]]},[])])})},RpuY:function(e,t,n){"use strict";var l=n("bKpL"),i=n("cPhF");l.Observable.prototype.mergeMap=i.mergeMap,l.Observable.prototype.flatMap=i.mergeMap},XL2q:function(e,t,n){"use strict";var l=n("bKpL"),i=n("7JOC");l.Observable.from=i.from}});